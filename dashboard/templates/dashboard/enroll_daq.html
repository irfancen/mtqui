{% extends 'base.html' %}
{% load static %}

{% block title %}
Enroll - {{ competition.judul }}
{% endblock title %}

{% block head %}
<link rel="stylesheet" href="{% static 'dashboard/css/forms.css' %}">
{% endblock head %}

{% block content %}
<div class="kenta-content">
    <h2>{{ competition.judul }}</h2>

    <div class="form-container">
        <form method="POST" enctype="multipart/form-data"> {% csrf_token %}
            <div class="form-row">
                <div class="form-group col-md-12">
                    <label>Nama Kelompok</label>
                    {{ kelompok_form.nama }}

                    {% if kelompok_form.nama.errors %}
                    <small class="form-text text-danger form-errors">
                        {% for error in kelompok_form.nama.errors %}
                            {{ error|escape }}
                        {% endfor %}
                    </small>
                    {% endif %}
                </div>
            </div>

            {% if kelompok_form.non_form_errors %}
            <small class="form-text text-danger">
                {% for error in kelompok_form.non_form_errors %}
                    {{ error|escape }}
                {% endfor %}
            </small>
            {% endif %}

            {{ anggota_daq_formset.management_form }}

            {% for anggota_daq_form in anggota_daq_formset %}
            <div class="anggota-daq-form">
                <hr>
                
                <div class="form-group">
                    <div class="form-check">
                        {{ anggota_daq_form.is_ketua }}
                        <label class="form-check-label">Ketua</label>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-12">
                        <label>Nama</label>
                        {{ anggota_daq_form.nama }}
    
                        {% if anggota_daq_form.nama.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.nama.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>Jurusan</label>
                        {{ anggota_daq_form.jurusan }}
    
                        {% if anggota_daq_form.jurusan.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.jurusan.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>

                    <div class="form-group col-md-6">
                        <label>Angkatan</label>
                        {{ anggota_daq_form.angkatan }}
    
                        {% if anggota_daq_form.angkatan.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.angkatan.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label>No. HP</label>
                        {{ anggota_daq_form.no_hp }}
    
                        {% if anggota_daq_form.no_hp.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.no_hp.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>

                    <div class="form-group col-md-6">
                        <label>Line ID</label>
                        {{ anggota_daq_form.line_id }}
    
                        {% if anggota_daq_form.line_id.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.line_id.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label>Foto KTM</label>
                        {{ anggota_daq_form.foto_ktm }}
    
                        {% if anggota_daq_form.foto_ktm.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.foto_ktm.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>

                    <div class="form-group col-md-4">
                        <label>Screenshot SIAK</label>
                        {{ anggota_daq_form.screenshot_siak }}
    
                        {% if anggota_daq_form.screenshot_siak.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.screenshot_siak.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>

                    <div class="form-group col-md-4">
                        <label>Berkas CV</label>
                        {{ anggota_daq_form.file_cv }}
    
                        {% if anggota_daq_form.file_cv.errors %}
                        <small class="form-text text-danger form-errors">
                            {% for error in anggota_daq_form.file_cv.errors %}
                                {{ error|escape }}
                            {% endfor %}
                        </small>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}

            {% if anggota_daq_formset.non_form_errors %}
            <p class="form-text text-danger">
                {% for error in anggota_daq_formset.non_form_errors %}
                    {{ error|escape }}
                {% endfor %}
            </p>
            {% endif %}

            <button type="submit" class="btn btn-success">Daftar</button>
        </form>
    </div>
</div>

<script src="{% static 'dashboard/js/invalid_field.js' %}"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="{% static 'dashboard/js/jquery.formset.js' %}"></script>
<script>
    $('.anggota-daq-form').formset({
        addText: 'Tambah Anggota',
        deleteText: 'Hapus Anggota'
    });
</script>
{% endblock content %}
